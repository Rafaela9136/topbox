<div class="list-show content">
  <% set_current_folder(@folder) %>
  <h2><b style="color: #2251A6"><%= @folder.name %> <button type="button" class="btn btn-default btn-sm">
    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>   <%= link_to 'Edit', edit_folder_path(@folder) unless @folder.name=='My TopBox' %>
    </button></b></h2>
  <p id="notice"><%= notice %></p>

  <p><%= @folder.description %></p>
  <p><b style="color: #2251A6">You're here:</b> <i><%= full_path(@folder) %></i></p>

  <table class="table table-striped">
    <thead>
     <tr style="color: #2251A6">
          <th><b>Name</b></th>
          <th><b>Last Change</b></th>
          <th><b>Options</b></th>
        </tr>
    </thead>
    <tbody>
    <% Folder.where(parent_id: @folder.id, owner_id: current_user.id).each do |folder| %>
        <tr>
          <td>
            <span class="glyphicon glyphicon-folder-open">  </span>
            <%= link_to folder.name, folder %>
          <td><%= folder.updated_at %></td>
          <td><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> <%= link_to 'Editar', edit_folder_path(folder) %></td>
          <td><span class="glyphicon glyphicon-trash">  </span><%= link_to 'Apagar', folder, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
    <% end %>
    </tbody>

    <tbody>

    <!-- Documents -->
    <% Document.where(holder_id: @folder.id).each do |document| %>
        <tr>
          <td>
             <span class="glyphicon glyphicon-file"> </span>
             <%= link_to document.name, document %>
          </td>
          <td><%= document.updated_at %></td>
          <td><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> <%= link_to 'Editar', edit_document_path(document) %></td>
          <td><span class="glyphicon glyphicon-trash">  </span><%= link_to 'Apagar', document, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
    <% end %>


    <!-- New folder modal -->
    <div class="modal fade" id="newFolder" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <%= render "folders/new", folder: Folder.new %>
    </div>


    <!-- New file modal -->
    <div class="modal fade" id="newFile" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <%= render "documents/new" %>
    </div>

    <!-- Menu -->
    <div id="menu" class="modal fade" role="dialog">
      <div class="btn-menu">
        <%= link_to("#newFile",
                    class: 'btn btn-info btn-circle btn-xl',
                    "data-toggle": "modal") do %>
            <%= content_tag('i', nil, class: 'glyphicon glyphicon-file') %>
        <% end %>
        <%= link_to("#newFolder",
                    class: 'btn btn-info btn-circle btn-xl',
                    "data-toggle": "modal") do %>
            <%= content_tag('i', nil, class: 'glyphicon glyphicon-folder-open') %>
        <% end %>
      </div>
    </div>

    <button type="button" data-toggle="modal" data-target="#menu" class="btn btn-primary btn-circle btn-xl lower-right"><i class="glyphicon glyphicon-plus"></i></button>>
    </tbody>
  </table>
  </div>


<!--   <%= link_to 'Edit', edit_folder_path(@folder) %> -->
