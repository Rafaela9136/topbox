<div class="container-fluid">
<div class="row">
  <div class="col-sm-2">
  <%= render 'sidebar' %>
  </div>
<div class="col-sm-10">
  <% set_current_folder(@folder) %>

  <p id="notice"><%= notice %></p>

<!-- Caminho clicável de pastas -->
<ol class="breadcrumb">
    <% parents = [] %>
    <% parent = @folder.parent %>
    <%= until parent.nil? do %>
        <% parents.push(parent) %>
        <% parent = parent.parent %>
    <% end %>

    <% parents.reverse.each do |folder| %>
      <li><%=link_to folder.name, folder%></li>
    <% end %>

    <li class="active"> <%= @folder.name unless @folder.nil?%></li>
</ol>



  <table class="table table-hover">
    <thead>
    <tr class="subtitle">
      <th>Nome</th>
      <th>Última modificação</th>
      <th>Opções</th>
    </tr>
    </thead>

    <!-- Folders -->
    <% Folder.where(parent_id: @folder.id, user_id: get_current_user.id).each do |folder| %>
    <tr >
      <td>
      &nbsp <span class="glyphicon glyphicon-folder-close silver" >  </span>
      &nbsp <%= link_to folder.name, folder %> 
      </td>
          <td><p class="text-muted">--</p></td>
          <td><span class="glyphicon glyphicon-pencil silver" aria-hidden="true"></span>
            &nbsp <%= link_to 'Editar', edit_folder_path(folder) %></td>
          <td><span class="glyphicon glyphicon-trash silver">  </span>
            &nbsp <%= link_to 'Apagar', folder, method: :delete, data: {confirm: 'Você tem certeza?'}%></td>
        </tr>
    <% end %>

    <!-- Documents -->
    <% Document.where(folder_id: @folder.id).each do |document| %>
        <tr >
          <td>
          &nbsp <span class="glyphicon glyphicon glyphicon-file silver" >  </span>
              &nbsp <%= link_to document.name, document %> 
            </td>
          <td><p class="text-muted"><%= document.updated_at.localtime.strftime('%d/%m/%Y às %H:%M') %></p></td>
          <td><span class="glyphicon glyphicon-pencil silver" aria-hidden="true"></span>
            &nbsp <%= link_to 'Editar', edit_document_path(document) %></td>
          <td><span class="glyphicon glyphicon-trash silver">  </span>
            &nbsp <%= link_to 'Apagar', document, method: :delete, data: {confirm: 'Você tem certeza?'} %></td>
        </tr>

    <% end %>
     </tbody>
  </table>

    <!-- Menu -->
    <div id="menu" class="modal fade" role="dialog">
      <div class="btn-menu">

        <%= link_to '/create_doc', class: 'btn btn-info btn-circle btn-xl' do %>
            <%= content_tag('i', nil, class: 'glyphicon glyphicon-file') %>
        <% end %>


        <button type="button" class='btn btn-info btn-circle btn-xl' data-toggle="modal"
                data-target="#createFolderModal">
          <content class='glyphicon glyphicon-folder-open'/>
        </button>
<% unless @folder == find_mytopbox%> 

        <%= link_to @folder, method: :delete, data: {confirm: 'Você tem certeza?'} , class: 'btn btn-info btn-circle btn-xl' do %>
            <%= content_tag('i', nil, class: 'glyphicon glyphicon-trash white') %>
        <% end %>
        <!--<#%= link_to edit_folder_path(@folder.id), class: 'btn btn-primary btn-circle btn-xl' do %>-->
            <!--<#%= content_tag('i', nil, class: 'glyphicon glyphicon-pencil') %>-->
        <!--<#% end %>-->

        <% end %>

      </div>
    </div>

   
</div>
</div>
<div class="footer"> <button type="button" data-toggle="modal" data-target="#menu" class="btn btn-primary btn-circle btn-xl lower-right">
      <i class="glyphicon glyphicon-plus"></i></button>
</div>
